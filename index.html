<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Live Universe</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.1/dist/hls.min.js"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

:root{
  --accent-cyan: #00f2ff;
  --accent-gold: #ffcc00;
  --glass: rgba(10,18,30,0.5);
}

html,body{height:100%}
body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at 10% 10%, #00172b 0%, #071029 25%, #020617 60%, #000000 100%);
  color: #e6eef2;
  margin: 0; padding: 0; overflow-x: hidden;
}

/* Top nav */
.navbar {
  position: sticky; top: 0; z-index: 60;
  display:flex; align-items:center; justify-content:space-between;
  gap:1rem; padding:0.6rem 1rem;
  background: linear-gradient(180deg, rgba(3,6,12,0.6), rgba(3,6,12,0.3));
  border-bottom: 1px solid rgba(255,255,255,0.04);
  backdrop-filter: blur(8px);
}
.brand {
  display:flex; align-items:center; gap:0.75rem;
}
.brand img { height:44px; width:auto; border-radius:6px; box-shadow: 0 6px 20px rgba(0,0,0,0.6);}
.brand h1 { font-size:1.05rem; color:var(--accent-cyan); margin:0; font-weight:700; letter-spacing:0.6px; }

.nav-controls { display:flex; gap:0.5rem; align-items:center; }
.nav-controls button {
  padding:8px 12px; border-radius:10px; background:transparent; color:#cfe8ef;
  border: 1px solid transparent; font-weight:600; cursor:pointer;
}
.nav-controls button.active{
  color: #00141a; background: linear-gradient(90deg,var(--accent-cyan), #77e6ff); border-color: rgba(0,242,255,0.12);
  box-shadow: 0 8px 30px rgba(0,242,255,0.06);
}

/* search */
#searchBox { width:220px; padding:8px 12px; border-radius:8px; background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.02); color:#dff7fb; }

/* hero background video iframe */
.hero-wrap { position:relative; width:100%; height:380px; overflow:hidden; border-bottom:1px solid rgba(255,255,255,0.03); }
.hero-wrap iframe{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:170vw; height:120vh; pointer-events:none; opacity:0.14; filter:grayscale(20%) contrast(85%); }

/* grid and cards */
.container { max-width:1280px; margin: -80px auto 64px; padding: 0 20px; position:relative; z-index:30; }
.grid { display:grid; grid-template-columns:repeat(2,1fr); gap:18px; }
@media(min-width:640px){ .grid{ grid-template-columns:repeat(3,1fr);} }
@media(min-width:900px){ .grid{ grid-template-columns:repeat(4,1fr);} }
@media(min-width:1200px){ .grid{ grid-template-columns:repeat(5,1fr);} }

.movie-card {
  background: linear-gradient(180deg, rgba(8,12,18,0.6), rgba(6,11,16,0.45));
  border:1px solid rgba(255,255,255,0.04);
  border-radius:12px; overflow:hidden; position:relative;
  transition: transform 0.28s cubic-bezier(.2,.9,.2,1), box-shadow .28s;
  backdrop-filter: blur(6px);
}
.movie-card:hover { transform: translateY(-8px); box-shadow: 0 18px 40px rgba(0,12,20,0.6); border-color: rgba(0,242,255,0.12); }

.poster-wrap { position:relative; display:block; height:180px; overflow:hidden; }
.poster-wrap img { width:100%; height:100%; object-fit:cover; transition: transform 0.5s; }
.movie-card:hover .poster-wrap img{ transform: scale(1.06); }

/* LIVE badge */
.live-badge {
  position:absolute; left:10px; top:10px; background: linear-gradient(90deg,#ff3b3b,#ff7b7b);
  color:white; padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px;
  box-shadow: 0 6px 18px rgba(255,59,59,0.16); display:flex; gap:8px; align-items:center;
  animation: livePulse 1.2s infinite;
}
.live-dot { width:8px; height:8px; border-radius:50%; background:#fff; box-shadow:0 0 8px rgba(255,255,255,0.7); }

@keyframes livePulse {
  0% { transform: scale(1); opacity:1;}
  50% { transform: scale(1.04); opacity:0.9;}
  100% { transform: scale(1); opacity:1;}
}

/* card body */
.card-body { padding:12px; display:flex; flex-direction:column; gap:6px; }
.title { font-weight:600; color:#eafcff; font-size:0.96rem; }
.meta { color:#bcdfe6; font-size:12px; display:flex; justify-content:space-between; align-items:center; }

/* watch button overlay */
.card-overlay {
  position:absolute; inset:0; display:flex; align-items:flex-end; justify-content:center; padding:14px; pointer-events:none;
}
.watch-btn {
  pointer-events:auto; background:linear-gradient(90deg,var(--accent-cyan), #47eaff);
  color:#00141a; padding:8px 14px; border-radius:999px; font-weight:700; border: none;
  transform: translateY(6px); transition: transform .2s;
}
.movie-card:hover .watch-btn{ transform:translateY(0); }

/* modal */
.modal-overlay {
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,0.8); z-index:120; backdrop-filter: blur(8px);
}
.modal-card {
  width:95%; max-width:1100px; background: linear-gradient(180deg, rgba(6,10,18,0.98), rgba(3,6,12,0.98));
  border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.04);
  box-shadow: 0 30px 80px rgba(0,0,0,0.7);
}
.modal-header { display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid rgba(255,255,255,0.04); }
.modal-title { color:var(--accent-cyan); font-weight:700; font-size:1rem; }
.modal-player { position:relative; padding-bottom:56.25%; height:0; background:#000; }

/* small utilities */
.tag { font-size:11px; padding:6px 8px; border-radius:8px; background:rgba(255,255,255,0.03); color:#cfe8ef; font-weight:600; }

.footer { text-align:center; color:#94bfc9; padding:22px 0; opacity:0.9; }

/* spark canvas overlay (preserve from original) */
#sparkCanvasPage{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10000;}

/* marquee ticker */
.ticker { background: linear-gradient(90deg, rgba(0,0,0,0.5), rgba(0,25,35,0.6)); border-top:1px solid rgba(255,255,255,0.02); padding:8px 12px; display:flex; align-items:center; gap:12px; overflow:hidden; }
.ticker .label { color:var(--accent-gold); font-weight:700; font-size:13px; white-space:nowrap; }
.ticker .marquee { flex:1; color:#cfe8ef; font-weight:600; white-space:nowrap; display:block; animation: marquee 18s linear infinite; }
@keyframes marquee { 0%{transform:translateX(100%)} 100%{transform:translateX(-100%)} }

</style>
</head>
<body>

<!-- Top Navigation -->
<header class="navbar">
  <div class="brand">
    <img src="https://static.vecteezy.com/system/resources/thumbnails/007/688/855/small/tv-logo-free-vector.jpg" alt="logo">
    <div>
      <h1>LIVE SPORTS NETWORK</h1>
      <div style="font-size:12px;color:#9fdff6;margin-top:2px;">Live channels · Movies · Entertainment</div>
    </div>
  </div>

  <div class="nav-controls">
    <div>
      <button data-cat="all" class="active">All</button>
      <button data-cat="cricket">Sports</button>
      <button data-cat="movie">Movies</button>
      <button data-cat="football">Football</button>
    </div>
    <input id="searchBox" placeholder="Search channels..." />
  </div>
</header>

<!-- Video Header -->
  <section class="video-header w-full">
    <video autoplay muted loop playsinline class="w-full h-auto max-h-[500px] object-cover">
      <source src="https://cdn.pixabay.com/video/2019/08/17/26097-357512275_large.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </section>

<!-- Ticker -->
<div class="ticker">
  <div class="label">NOW</div>
  <div id="ticker-text" class="marquee">IND vs AUS • Live on Sony Sports 1 • Next: PAK vs BAN • Tune for match highlights & replays</div>
</div>

<!-- Grid container -->
<main class="container">
  <div id="movies" class="grid"></div>
</main>

<footer class="footer">© Live Channels Universe</footer>

<!-- Modal -->
<div id="video-modal" class="modal-overlay hidden" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-header">
      <div id="modal-title" class="modal-title"></div>
      <button id="close-video-modal" class="text-white hover:text-red-400"><i class="fas fa-times text-xl"></i></button>
    </div>
    <div class="modal-player">
      <!-- video or iframe will be injected here -->
      <video id="modal-video" class="absolute inset-0 w-full h-full" controls playsinline></video>
    </div>
  </div>
</div>

<!-- Spark Canvas (original preserved) -->
<canvas id="sparkCanvasPage"></canvas>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.1/dist/hls.min.js"></script>
<script>
/* ======= Channel list (kept identical to your original entries) ======= */
const movies = [
 {
    title: "Sony Sports 1",
    video: "https://allottplay.com/tv/toffee/live.php?id=sony_sports_1_hd",
    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSVjDTXq-_cCgYr7x72KFivpdp-U9YFTwdf9g&s",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Sony Sports 5",
    video: "https://allottplay.com/tv/toffee/live.php?id=sony_sports_5_hd",
    image: "https://www.sonypicturesnetworks.com/images/logos/SONY_SportsTen5_HD_Logo_CLR.png",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Willow XTRA",
    video: "https://fl7.moveonjoy.com/WILLOW_CRICKET/index.m3u8",
    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcG_dlntgSehdJUsXxCMkIPVq6FZViCQ5zij2mffUifgN-SOacL-q6PukpKzzgFG0EVvw&usqp=CAU",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Willow Cricket",
    video: "https://fl7.moveonjoy.com/WILLOW_CRICKET/index.m3u8",
    image: "https://image.xumo.com/v1/channels/channel/99951406/600x337.webp?type=channelTile",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Star Sports 1 HD",
    video: "https://wasitv-pro.site/crichd/master.m3u8/?c=star1in&key=WASITV",
    image: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Star_Sports_1_HD.png/1200px-Star_Sports_1_HD.png",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Star Sports 2 HD",
    video: "https://cors-anywhere.creativeclaritycreations.com/http://89.187.189.98/STARSPORTS2HD/index.m3u8",
    image: "https://img1.hotstarext.com/image/upload/f_auto/sources/r1/cms/prod/7196/597196-h",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "DD Sports",
    video: "https://cdn-6.pishow.tv/live/13/master.m3u8",
    image: "https://upload.wikimedia.org/wikipedia/en/thumb/1/16/DD_Sports_logo.svg/1200px-DD_Sports_logo.svg.png",
    category: "cricket",
    language: "Hindi",
    isPopular: true
  },
  {
    title: "Ten Cricket",
    video: "https://allottplay.com/tv/toffee/live.php?id=ten_cricket",
    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLMhVJFXkNYK7trsuhRe58ZK1-pQLUhD3T6w&s",
    category: "cricket",
    language: "English",
    isPopular: false
  },
  {
    title: "Ten Sports HD",
    video: "https://flussonic.superfasthdserver.com/TenSports/index.m3u8",
    image: "https://upload.wikimedia.org/wikipedia/en/1/12/Ten_Sports_Logo.png",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Sky Sports Cricket",
    video: "https://wasitv-pro.site/crichd/master.m3u8/?c=skyscric&key=WASITV",
    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSsvdclX7KrynjQ1-VOHm3S3RCZzTayQnYE2w&s",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "A Sports HD",
    video: "https://wasitv-pro.site/crichd/master.m3u8/?c=asportshd&key=WASITV",
    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDuSnhZM781OL5Yl9KapyIuEe_z8fNQrdqmw&s",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "FiFa+ UK",
    video: "https://a62dad94.wurl.com/master/f36d25e7e52f1ba8d7e56eb859c636563214f541/UmFrdXRlblRWLWV1X0ZJRkFQbHVzRW5nbGlzaF9ITFM/playlist.m3u8",
    image: "https://brandlogos.net/wp-content/uploads/2022/10/fifa-logo_brandlogos.net_pdjxs-512x512.png",
    category: "football",
    language: "English",
    isPopular: true
  },
  {
    title: "Cricket Gold",
    video: "https://d382r3rgbxdixq.cloudfront.net/scheduler/scheduleMaster/418.m3u8",
    image: "https://i.ytimg.com/vi/CeAgx48qQ3M/hq720.jpg?v=65bae4af&sqp=CLT54scG-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLD6fP5iTRlif4O3JGKjLReLKlw1dg",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "astro cricket",
    video: "https://smart.bengaldigital.live/AstroCricket/index.m3u8",
    image: "https://upload.wikimedia.org/wikipedia/commons/f/fc/Astro_Cricket_%282024%29.png",
    category: "cricket",
    language: "English",
    isPopular: true
  },
  {
    title: "Zee Cinema HD",
    video: "https://amg17931-zee-amg17931c5-samsung-th-5696.playouts.now.amagi.tv/playlist/amg17931-asiatvusaltdfast-zeecinema-samsungth/playlist.m3u8",
    image: "https://pbs.twimg.com/profile_images/971359116122767360/zfwcAwYB_400x400.jpg",
    category: "movie",
    language: "Hindi",
    isPopular: true
  },
  {
    title: "B4U Movies",
    video: "https://cdnb4u.wiseplayout.com:443/B4U_Movies/HD1080/HD1080.m3u8",
    image: "https://www.nicepng.com/png/detail/359-3595110_b4u-movies-logo-b4u-movies-channel-logo.png",
    category: "movie",
    language: "Hindi",
    isPopular: true
  },
  {
    title: "DD National HD",
    video: "https://d3qs3d2rkhfqrt.cloudfront.net:443/out/v1/40492a64c1db4a1385ba1a397d357d3a/index_3.m3u8",
    image: "https://upload.wikimedia.org/wikipedia/hi/1/15/Dd_national_New_Logos.png",
    category: "movie",
    language: "Hindi",
    isPopular: true
  },
  {
    title: "&Flix",
    video: "https://edge3-moblive.yuppcdn.net/drm/smil:nflixdrm.smil/index.m3u8",
    image: "https://exchange4media.gumlet.io/news-photo/108705-big24.jpg",
    category: "movie",
    language: "English",
    isPopular: true
  },
  {
    title: "DD Sahyadri",
    video: "https://d3qs3d2rkhfqrt.cloudfront.net/out/v1/66dcc3ebe182447ba42837e746cf0c7c/index.m3u8",
    image: "https://www.saamana.com/wp-content/uploads/2017/01/dd-sahyadri-logo.jpg",
    category: "movie",
    language: "Hindi",
    isPopular: true
  },
  {
    title: "TNT Sports 2",
    video: "https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/dash/enc/bsaaetko8v/out/v1/f8fa17f087564f51aa4d5c700be43ec4/cenc.mpd",
    image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSg-y6bVhw19VBEl7AXbr1EMsGcchkjQHxsU0PSRexEYazGTY2TgxjewSvyxaaRgkq0dT8&usqp=CAU",
    category: "movie",
    language: "English",
    isPopular: true
  },
  {
    title: "Star Movies Select HD",
    video: "https://smashyplayer.top:443/hls/pdPobtaRuieS_GLX9bD8YA/k5/sku8p8ed/u89az/tt/index-f1-v1-a1.m3u8?v=1758651105",
    image: "https://www.adgully.com/img/800/202003/star-movies-select-hd.png.jpg",
    category: "movie",
    language: "English",
    isPopular: true
  },
];

/* ======= Elements & state ======= */
const container = document.getElementById('movies');
const videoModal = document.getElementById('video-modal');
const modalTitle = document.getElementById('modal-title');
let currentHls = null;

/* ======= Helpers (kept from original) ======= */
function showModal(){ videoModal.classList.remove('hidden'); document.body.style.overflow='hidden'; videoModal.setAttribute('aria-hidden','false'); }
function hideModal(){ videoModal.classList.add('hidden'); document.body.style.overflow=''; videoModal.setAttribute('aria-hidden','true'); }

function isHls(u){ return !!(u && (u.includes('.m3u8') || u.includes('index-') || /index.*\\.txt/i.test(u))); }
function isMP4(u){ return !!(u && /\.mp4($|\?)/i.test(u)); }
function isYouTube(u){ return !!(u && (u.includes('youtu') || u.includes('youtube.com') || u.includes('youtu.be'))); }

/* playInModal: handles streamtape, youtube, hls, mp4, and fallback */
function playInModal(title, url) {
  // cleanup previous
  if (currentHls) {
    try { currentHls.destroy(); } catch(e) {}
    currentHls = null;
  }

  const playerContainer = document.querySelector('.modal-player');
  const modalVideo = document.getElementById('modal-video');
  modalTitle.textContent = title || '';

  // Streamtape embed detection
  if (url.includes('streamtape.com')) {
    playerContainer.innerHTML = `<iframe src="${url}" width="100%" height="100%" allowfullscreen allowtransparency allow="autoplay" scrolling="no" frameborder="0"></iframe>`;
    showModal();
    return;
  }

  // YouTube
  if (isYouTube(url)) {
    // Accept URLs like https://www.youtube.com/embed/ID or full watch URL
    let embed = url;
    if (url.includes('watch?v=')) {
      const id = (new URL(url)).searchParams.get('v');
      embed = `https://www.youtube.com/embed/${id}`;
    } else if (url.includes('youtu.be/')) {
      const id = url.split('youtu.be/')[1].split(/[?&]/)[0];
      embed = `https://www.youtube.com/embed/${id}`;
    }
    playerContainer.innerHTML = `<iframe src="${embed}?autoplay=1&modestbranding=1&rel=0" width="100%" height="100%" allowfullscreen allow="autoplay; encrypted-media" frameborder="0"></iframe>`;
    showModal();
    return;
  }

  // HLS
  if (isHls(url)) {
    // ensure video element exists
    playerContainer.innerHTML = `<video id="modal-video" class="absolute inset-0 w-full h-full" controls playsinline></video>`;
    const videoEl = document.getElementById('modal-video');
    if (Hls.isSupported()) {
      currentHls = new Hls();
      try {
        currentHls.loadSource(url);
        currentHls.attachMedia(videoEl);
        currentHls.on(Hls.Events.MANIFEST_PARSED, () => { showModal(); videoEl.play().catch(()=>{}); });
      } catch(e) {
        // fallback to direct src
        videoEl.src = url;
        showModal();
        videoEl.play().catch(()=>{});
      }
    } else {
      videoEl.src = url;
      showModal();
      videoEl.play().catch(()=>{});
    }
    return;
  }

  // MP4
  if (isMP4(url)) {
    playerContainer.innerHTML = `<video id="modal-video" class="absolute inset-0 w-full h-full" controls playsinline src="${url}"></video>`;
    showModal();
    const v = document.getElementById('modal-video');
    v.play().catch(()=>{});
    return;
  }

  // else fallback to player.html (preserve original behavior)
  window.location.href = `player.html?title=${encodeURIComponent(title)}&video=${encodeURIComponent(url)}`;
}

/* Closes player and restores modal content */
function closePlayer(){
  if (currentHls) { try { currentHls.destroy(); } catch(e) {} currentHls = null; }
  const playerContainer = document.querySelector('.modal-player');
  playerContainer.innerHTML = `<video id="modal-video" class="absolute inset-0 w-full h-full" controls playsinline></video>`;
  hideModal();
}

/* close handlers */
document.getElementById('close-video-modal').addEventListener('click', closePlayer);
videoModal.addEventListener('click', e => { if (e.target === videoModal) closePlayer(); });

/* ======= Render grid (modern sports card UI) ======= */
function renderMovies(list) {
  container.innerHTML = '';
  list.forEach(movie => {
    const div = document.createElement('div');
    div.className = 'movie-card';
    // live badge only for isPopular true
    const live = movie.isPopular ? `<div class="live-badge"><span class="live-dot"></span><span style="margin-left:6px">LIVE</span></div>` : '';
    const year = movie.year ? movie.year : '';
    div.innerHTML = `
      <div class="poster-wrap">
        <img src="${movie.image}" alt="${movie.title}" loading="lazy">
        ${live}
        <div class="card-overlay"><button class="watch-btn"><i class="fas fa-play"></i>&nbsp;Watch</button></div>
      </div>
      <div class="card-body">
        <div class="title">${movie.title}</div>
        <div class="meta"><span class="tag">${movie.category ? movie.category.toUpperCase() : ''}</span><span>${movie.language||''}</span></div>
      </div>
    `;
    // click anywhere to play
    div.addEventListener('click', () => playInModal(movie.title, movie.video));
    container.appendChild(div);
  });
}

/* initial render */
renderMovies(movies);

/* ======= Category filter logic (top nav) ======= */
document.querySelectorAll('.nav-controls button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.nav-controls button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const cat = btn.dataset.cat || 'all';
    if (cat === 'all') renderMovies(movies);
    else renderMovies(movies.filter(m => m.category === cat));
  });
});

/* search box */
document.getElementById('searchBox').addEventListener('input', (e) => {
  const q = e.target.value.trim().toLowerCase();
  if (!q) { // if empty, keep current active filter
    const active = document.querySelector('.nav-controls button.active');
    const cat = active ? (active.dataset.cat || 'all') : 'all';
    if (cat === 'all') renderMovies(movies); else renderMovies(movies.filter(m => m.category === cat));
    return;
  }
  const filtered = movies.filter(m => (m.title || '').toLowerCase().includes(q) || (m.category||'').toLowerCase().includes(q) || (m.language||'').toLowerCase().includes(q));
  renderMovies(filtered);
});

/* ======= Ticker update (small helper) ======= */
(function updateTicker(){
  const ticker = document.getElementById('ticker-text');
  // auto rotate a message based on popular channels
  const popular = movies.filter(m => m.isPopular).slice(0,5).map(m => m.title).join(' • ');
  ticker.textContent = `Now on air: ${popular} • Catch replays & highlights`;
})();

/* ======= Spark canvas (preserved) ======= */
const canvas=document.getElementById('sparkCanvasPage');const ctx=canvas.getContext('2d');const sparks=[];
function resizeCanvas(){canvas.width=innerWidth;canvas.height=innerHeight;}window.addEventListener('resize',resizeCanvas);resizeCanvas();
const easing=t=>t*(2-t);const dur=300,count=6,size=8,radius=12,color='#00f2ff';
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);const now=performance.now();
for(let i=sparks.length-1;i>=0;i--){const s=sparks[i];const el=now-s.t;if(el>=dur){sparks.splice(i,1);continue;}
const p=el/dur;const e=easing(p);const d=e*radius;const l=size*(1-e);const x1=s.x+d*Math.cos(s.a),y1=s.y+d*Math.sin(s.a);
const x2=s.x+(d+l)*Math.cos(s.a),y2=s.y+(d+l)*Math.sin(s.a);ctx.strokeStyle=color;ctx.lineWidth=1.5;ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.stroke();}
requestAnimationFrame(draw);}requestAnimationFrame(draw);
document.addEventListener('click',e=>{for(let i=0;i<count;i++){sparks.push({x:e.clientX,y:e.clientY,a:(2*Math.PI*i)/count,t:performance.now()});}});

</script>
</body>
</html>
